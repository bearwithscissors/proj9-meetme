import flask
import arrow

import CONFIG
import available_times

def test_available_times():
    cal_list = [{'summary': 'CIS 313', 'start': '2016-09-26T10:00:00-07:00', 'end': '2016-09-26T10:50:00-07:00'}, {'summary': 'Tech Desk', 'start': '2016-09-26T11:00:00-07:00', 'end': '2016-09-26T12:50:00-07:00'}, {'summary': 'CIS 313 - LAB', 'start': '2016-09-26T13:00:00-07:00', 'end': '2016-09-26T13:50:00-07:00'}, {'summary': 'Tech Desk', 'start': '2016-09-26T14:00:00-07:00', 'end': '2016-09-26T14:50:00-07:00'}, {'summary': 'CIS 314', 'start': '2016-09-26T15:00:00-07:00', 'end': '2016-09-26T15:50:00-07:00'}, {'summary': 'CIS 314 - LAB', 'start': '2016-09-26T16:00:00-07:00', 'end': '2016-09-26T16:50:00-07:00'}, {'summary': 'Run', 'start': '2016-09-27T08:00:00-07:00', 'end': '2016-09-27T09:00:00-07:00'}, {'summary': 'CIS 322', 'start': '2016-09-27T10:00:00-07:00', 'end': '2016-09-27T11:20:00-07:00'}, {'summary': 'Tech Desk', 'start': '2016-09-27T12:00:00-07:00', 'end': '2016-09-27T13:50:00-07:00'}, {'summary': 'CIS 322 - LAB', 'start': '2016-09-27T14:00:00-07:00', 'end': '2016-09-27T14:50:00-07:00'}, {'summary': 'CIS 313', 'start': '2016-09-28T10:00:00-07:00', 'end': '2016-09-28T10:50:00-07:00'}, {'summary': 'Tech Desk', 'start': '2016-09-28T11:00:00-07:00', 'end': '2016-09-28T13:50:00-07:00'}, {'summary': 'CIS 314', 'start': '2016-09-28T15:00:00-07:00', 'end': '2016-09-28T15:50:00-07:00'}, {'summary': 'Run', 'start': '2016-09-29T08:00:00-07:00', 'end': '2016-09-29T09:00:00-07:00'}, {'summary': 'CIS 322', 'start': '2016-09-29T10:00:00-07:00', 'end': '2016-09-29T11:20:00-07:00'}, {'summary': 'Tech Desk', 'start': '2016-09-29T12:00:00-07:00', 'end': '2016-09-29T16:00:00-07:00'}, {'summary': 'Tech Desk', 'start': '2016-09-30T08:00:00-07:00', 'end': '2016-09-30T09:50:00-07:00'}, {'summary': 'CIS 313', 'start': '2016-09-30T10:00:00-07:00', 'end': '2016-09-30T10:50:00-07:00'}, {'summary': 'Tech Desk', 'start': '2016-09-30T11:00:00-07:00', 'end': '2016-09-30T13:50:00-07:00'}, {'summary': 'CIS 314', 'start': '2016-09-30T15:00:00-07:00', 'end': '2016-09-30T15:50:00-07:00'}]
    begin_date = "2016-09-25T10:00:00-08:00"
    end_date = "2016-10-01T17:00:00-08:00"
    begin_time = "2016-01-01T10:00:00-08:00"
    end_time = "2016-01-01T17:00:00-08:00"

    result = available_times.available_times(cal_list,begin_date,end_date,begin_time,end_time)
    assert result == [{'start': '10:00', 'day': '2016-09-25', 'end': '17:00', 'status': 'free'}, {'start': '10:50', 'day': '2016-09-26', 'end': '11:00', 'status': 'free'}, {'start': '12:50', 'day': '2016-09-26', 'end': '13:00', 'status': 'free'}, {'start': '13:50', 'day': '2016-09-26', 'end': '14:00', 'status': 'free'}, {'start': '14:50', 'day': '2016-09-26', 'end': '15:00', 'status': 'free'}, {'start': '15:50', 'day': '2016-09-26', 'end': '16:00', 'status': 'free'}, {'start': '16:50', 'day': '2016-09-26', 'end': '17:00', 'status': 'free'}, {'start': '11:20', 'day': '2016-09-27', 'end': '12:00', 'status': 'free'}, {'start': '13:50', 'day': '2016-09-27', 'end': '14:00', 'status': 'free'}, {'start': '14:50', 'day': '2016-09-27', 'end': '17:00', 'status': 'free'}, {'start': '10:50', 'day': '2016-09-28', 'end': '11:00', 'status': 'free'}, {'start': '13:50', 'day': '2016-09-28', 'end': '15:00', 'status': 'free'}, {'start': '15:50', 'day': '2016-09-28', 'end': '17:00', 'status': 'free'}, {'start': '11:20', 'day': '2016-09-29', 'end': '12:00', 'status': 'free'}, {'start': '16:00', 'day': '2016-09-29', 'end': '17:00', 'status': 'free'}, {'start': '10:50', 'day': '2016-09-30', 'end': '11:00', 'status': 'free'}, {'start': '13:50', 'day': '2016-09-30', 'end': '15:00', 'status': 'free'}, {'start': '15:50', 'day': '2016-09-30', 'end': '17:00', 'status': 'free'}, {'start': '10:00', 'day': '2016-10-01', 'end': '17:00', 'status': 'free'}]

test_available_times()
